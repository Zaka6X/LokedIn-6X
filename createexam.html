<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>LockedIn 6X - Création d’Examen</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="style/form.css">
</head>
<body>
  <div class="form-container">
    <h1 id="form-title">Créer un Examen</h1>
    <form id="examForm" action="/auth/creerexam" method="post">
        <div class="form-floating mb-3">
            <input type="text" class="form-control" name="titre" id="titre" placeholder="Titre" required>
            <label for="titre">Titre de l’examen</label>
        </div>
        <div class="form-floating mb-3">
            <input type="text" class="form-control" name="target" id="target" placeholder="Public ciblé" required>
            <label for="target">Public ciblé (ex: MIP)</label>
        </div>
            <div class="form-floating mb-3">
            <input class="form-control" name="description" id="description" placeholder="Description" style="height: 100px;" required></input>
        <label for="description">Description</label>
    </div>
      <button type="submit" class="btn btn-primary">Créer</button>
      <br><br>
      <a class="btn btn-action w-100" href="dashboard.html">Retour au Formulaire</a>
    </form>

    <!-- After Creation Form (initially hidden) -->
    <div class="form-floating mb-3" id="Questiontype" style="display: none;">
        <select class="form-select" name="questionType" id="questionType" required>
            <option value="" disabled selected>Type de question</option>
            <option value="QCM">Question choix Multiple</option>
            <option value="DQ">Question Directe</option>
        </select>
        <br>
        <button id="nextButton" class="btn btn-primary">Suivant</button>
    </div>

    
    <!-- Qcm Choice-->
    <form id="Qcm-question" action="/auth/addquestion" method="post" style="display: none;">
        <input type="hidden" name="examId" id="examIdQCM" value="">
        <div class="form-floating mb-3">
            <input type="text" class="form-control" name="question" id="question" placeholder="Question" required>
            <label for="question">Question</label>
        </div>
        <label>Options :</label>
        <div class="form-floating mb-3">
            <input type="text" class="form-control" name="options[]" id="option1" placeholder="Option 1" required>
            <label for="option1">Option 1</label>
        </div>
        <div class="form-floating mb-3">
            <input type="text" class="form-control" name="options[]" id="option2" placeholder="Option 2" required>
            <label for="option2">Option 2</label>
        </div>
        <div id="optionsContainer" class="mb-3">
            <div id="optionList"></div>
            <button type="button" onclick="addOption()" class="btn btn-sm btn-success">Ajouter Option</button>
          </div>
        <div class="form-floating mb-3">
            <select class="form-select" name="answer" id="answer" required>
                <option value="" disabled selected>Reponse Correcte</option>
                <option value="OP1">Option 1</option>
                <option value="OP2">Option 2</option>
            </select>
        </div>
        <div class="form-floating mb-3">
            <input type="number" class="form-control" name="note" id="note" placeholder="Note de la Question" required>
            <label for="mote">Note de la Question</label>
        </div>
        <div class="form-floating mb-3">
            <input type="number" class="form-control" name="duree" id="duree" placeholder="Duree de la Question" required>
            <label for="mote">Duree de la Question</label>
        </div>
        <button type="submit" class="btn btn-secondary">Ajouter Question</button>
        <br><br>
        <div id="message" style="text-align:center;"></div>
        <button id="creationDoneQCM" class="btn btn-primary">Creer l'examen</button>
    </form>

    <!-- Dq Choice-->
    <form id="Dq-question" action="/auth/addquestion" method="post" style="display: none;">
        <input type="hidden" name="examId" id="examIdDQ" value="">
        <div class="form-floating mb-3">
            <input type="text" class="form-control" name="question" id="question" placeholder="Question" required>
            <label for="question">Question</label>
        </div>
        <div class="form-floating mb-3">
            <input type="text" class="form-control" name="answer" id="answer" placeholder="Answer" required>
            <label for="question">Reponse Correcte</label>
        </div>
        <div class="form-floating mb-3">
            <input type="number" class="form-control" name="note" id="note" placeholder="Note de la Question" required>
            <label for="mote">Note de la Question</label>
        </div>
        <div class="form-floating mb-3">
            <input type="number" class="form-control" name="duree" id="duree" placeholder="Duree de la Question" required>
            <label for="mote">Duree de la Question</label>
        </div>
        <button type="submit" class="btn btn-secondary">Ajouter Question</button>
        <br><br>
        <div id="message" style="text-align:center;"></div>
        <button id="creationDoneDQ" class="btn btn-primary">Creer l'examen</button>
    </form>
      
    <!-- Exam Created Message (initially hidden) -->
    <div id="examCreatedBox" style="display: none; text-align: center; padding: 20px; border: 1px solid #ccc; border-radius: 10px; margin-top: 20px;">
        <h3>Examen créé avec succès !</h3>
        <p>Voici le lien de votre examen :</p>
        <input type="text" id="examLinkDisplay" class="form-control" readonly>
        <br>
        <button id="goToDashboard" class="btn btn-success">Retour a l'accuiel</button>
  </div>

  </div>
  <script src="scripts/exams.js"></script>
  <script src="scripts/result.js"></script>
</body>
</html>
